(function(){"use strict";const n="G-214RJM3C13",e="98271361";function r(){const e=new URLSearchParams(window.location.search);return{utm_source:e.get("utm_source")||"",utm_medium:e.get("utm_medium")||"",utm_campaign:e.get("utm_campaign")||"",utm_term:e.get("utm_term")||"",utm_content:e.get("utm_content")||""}}const i=r();Object.values(i).some(e=>e!=="")&&sessionStorage.setItem("utm_params",JSON.stringify(i));function t(){try{return JSON.parse(sessionStorage.getItem("utm_params")||"{}")}catch{return{}}}window.trackMessengerClick=function(s,o){const a=window.paletteSwitcher?.getCurrent()||"unknown",i={messenger_type:s,button_position:o,color_palette:a,...t()};typeof gtag!="undefined"&&n&&(gtag("event","cta_messenger_click",i),console.log("GA4 event fired:","cta_messenger_click",i)),typeof ym!="undefined"&&e&&(ym(e,"reachGoal","cta_messenger_click",i),console.log("YM event fired:","cta_messenger_click",i))};let s={25:!1,50:!1,75:!1,100:!1};function c(){const o=document.documentElement.scrollHeight-window.innerHeight,i=window.scrollY,a=i/o*100;Object.keys(s).forEach(o=>{if(a>=parseInt(o)&&!s[o]){s[o]=!0;const i={scroll_depth:o,...t()};typeof gtag!="undefined"&&n&&(gtag("event","scroll_depth",i),console.log("GA4 scroll_depth:",o+"%")),typeof ym!="undefined"&&e&&ym(e,"reachGoal","scroll_depth_"+o)}})}let a;window.addEventListener("scroll",function(){clearTimeout(a),a=setTimeout(c,100)});const l=[30,60,120];let o={};l.forEach(s=>{o[s]=!1,setTimeout(()=>{if(!o[s]){o[s]=!0;const i={seconds:s,...t()};typeof gtag!="undefined"&&n&&(gtag("event","time_on_page",i),console.log("GA4 time_on_page:",s+"s")),typeof ym!="undefined"&&e&&ym(e,"reachGoal","time_on_page_"+s)}},s*1e3)});function d(){const e=document.querySelectorAll("[data-cta]");e.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-cta"),t=this.getAttribute("data-position")||"unknown";window.trackMessengerClick(e,t)})}),console.log("CTA tracking initialized for",e.length,"buttons")}document.addEventListener("DOMContentLoaded",function(){console.log("Analytics initialized"),console.log("UTM parameters:",t()),d()})})()