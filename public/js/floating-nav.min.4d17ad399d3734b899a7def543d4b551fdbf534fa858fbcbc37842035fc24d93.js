(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){n()});function n(){const n=document.querySelector(".floating-nav"),o=document.querySelector(".floating-nav__toggle"),i=document.querySelector(".floating-nav__backdrop"),t=document.querySelectorAll(".floating-nav__item");if(!n||!o){console.warn("Floating nav elements not found");return}o.addEventListener("click",function(e){e.preventDefault(),s()}),i&&i.addEventListener("click",function(){e()}),t.forEach(function(t){t.addEventListener("click",function(){setTimeout(function(){e()},100);const n=this.getAttribute("data-target"),s=this.querySelector(".floating-nav__item-title")?.textContent;a(n,s)})}),document.addEventListener("keydown",function(t){t.key==="Escape"&&n.classList.contains("floating-nav--expanded")&&(e(),o.focus())}),document.addEventListener("click",function(t){n.classList.contains("floating-nav--expanded")&&(n.contains(t.target)||e())}),t.forEach(function(e,n){e.addEventListener("keydown",function(e){if(e.key==="ArrowDown"){e.preventDefault();const s=t[n+1]||t[0];s.focus()}else if(e.key==="ArrowUp"){e.preventDefault();const s=t[n-1]||t[t.length-1];s.focus()}else e.key==="Home"?(e.preventDefault(),t[0].focus()):e.key==="End"&&(e.preventDefault(),t[t.length-1].focus())})}),console.log("Floating navigation initialized")}function s(){const t=document.querySelector(".floating-nav"),n=t.classList.contains("floating-nav--expanded");n?e():o()}function o(){const n=document.querySelector(".floating-nav"),e=document.querySelector(".floating-nav__toggle"),s=document.querySelector(".floating-nav__menu"),t=document.querySelector(".floating-nav__item");n.classList.add("floating-nav--expanded"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Закрыть меню навигации"),s.setAttribute("aria-hidden","false"),window.innerWidth<768&&(document.body.style.overflow="hidden"),setTimeout(function(){t&&t.focus()},100),i("open")}function e(){const t=document.querySelector(".floating-nav"),e=document.querySelector(".floating-nav__toggle"),n=document.querySelector(".floating-nav__menu");t.classList.remove("floating-nav--expanded"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Открыть меню навигации"),n.setAttribute("aria-hidden","true"),document.body.style.overflow=""}function i(e){const s=window.paletteSwitcher?.getCurrent()||"unknown",o=t(),n={action:e,color_palette:s,...o};if(typeof gtag!="undefined"&&(gtag("event","floating_nav_toggle",n),console.log("GA4: floating_nav_toggle",e)),typeof ym!="undefined"){const t=window.YM_ID||"98819060";ym(t,"reachGoal","floating_nav_"+e,n),console.log("YM: floating_nav_"+e)}}function a(e,n){const o=window.paletteSwitcher?.getCurrent()||"unknown",i=t(),s={target_section:e,link_title:n,color_palette:o,...i};if(typeof gtag!="undefined"&&(gtag("event","floating_nav_click",s),console.log("GA4: floating_nav_click",e)),typeof ym!="undefined"){const t=window.YM_ID||"98819060";ym(t,"reachGoal","floating_nav_click_"+e,s),console.log("YM: floating_nav_click_"+e)}}function t(){try{return JSON.parse(sessionStorage.getItem("utm_params")||"{}")}catch{return{}}}})()